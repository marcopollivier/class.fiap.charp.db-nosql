CONTAINER_NAME = aula02-mongodb

.PHONY: up down

up: ## Iniciar MongoDB com dados limpos
	@echo "üöÄ Iniciando MongoDB com dados pr√©-carregados..."
	@docker compose up -d
	@echo "‚è≥ Aguardando MongoDB inicializar..."
	@sleep 5
	@echo "‚úÖ MongoDB iniciado com sucesso!"

down: ## Parar MongoDB e limpar dados
	@echo "üõë Parando MongoDB..."
	@docker compose down --remove-orphans 2>/dev/null || true
	@docker container rm $(CONTAINER_NAME) 2>/dev/null || true
	@docker volume prune -f >/dev/null 2>&1 || true
	@echo "üóëÔ∏è  Limpando dados locais..."
	@find ./data/db -mindepth 1 -not -name '.gitkeep' -delete 2>/dev/null || true
	@mkdir -p ./data/db
	@echo "‚ú® Limpeza conclu√≠da!"
